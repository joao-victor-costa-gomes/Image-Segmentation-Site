{% extends "base.html" %}

{% block title %} Segmentação por Limiarização {% endblock %}

{% block content %}
    <section class="segmentation_page_section">

        <div class="page_title">Segmentação por Limiarização</div>

        <div>
            
        </div>

        <!-- Primeiro formulário: Upload da imagem -->
        <form action="{{ url_for('main.threshold_page') }}" method="POST" enctype="multipart/form-data">
            <input type="file" name="image" accept="image/png, image/jpeg">
            <button type="submit">Enviar Imagem</button>
        </form>

        <br>

        {% if filename %}
        <h3>Imagem enviada</h3>
        <img src="{{ url_for('main.uploaded_file_path', filename=filename) }}" alt="Imagem Enviada" width="300">

        <br>
        <!-- Segundo formulário: Enviar o valor do threshold -->
        <h3>Parâmetros de segmentação</h3>
        <form action="" method="POST">
            <input type="hidden" name="filename" value="{{ filename }}">
            <label for="threshold_value">Valor do Threshold:</label>
            <input type="number" name="threshold_value" min="0" max="255" value="150">
            <button type="submit" name="apply_threshold">Aplicar Threshold</button>
        </form>
        {% endif %}

        <br>

        {% if segmented_filenames %}
            <h3>Imagens Segmentadas</h3>
                {% for segmented_filename in segmented_filenames %}
                    <img src="{{ url_for('main.processed_file_path', filename=segmented_filename) }}" alt="Imagem Segmentada" width="300">
                {% endfor %}
        {% endif %}

        <br>

    </section>
{% endblock %}